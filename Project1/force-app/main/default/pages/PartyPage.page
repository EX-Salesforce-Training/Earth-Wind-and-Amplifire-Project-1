<apex:page controller="PartyListPageController">
    <apex:form >
        <apex:pageMessages />
        <apex:pageBlock id="partyBlock" title="{!currentParty.Name}">
            <apex:pageBlockTable value="{!currentPartyMembers}" var="member" >
                <apex:column headerValue="{!$ObjectType.Guild_Member__c.fields.Name.label}" >
                    <apex:outputLink value="/{!member.id}" >
                        {!member.Name}
                    </apex:outputLink>
                </apex:column>
                <apex:column value="{!member.Class__c}" />
                <apex:column value="{!member.Race__c}" />
                <apex:column value="{!member.Active__c}" />
            </apex:pageBlockTable> 
            <apex:pageBlockSection title="Join Party" >
                <apex:outputText value="Not recruiting at this time." rendered="{!!currentParty.Accepting_New_Members__c}"/>
                <apex:commandLink value="Join" action="{!joinParty}" reRender="partyBlock" rendered="{!currentParty.Accepting_New_Members__c}"/>
                &nbsp;&nbsp;
                <apex:commandLink value="Party List" action="{!listPage}" />
            </apex:pageBlockSection>
        </apex:pageBlock>
    </apex:form>
</apex:page>